{% extends 'layout/layout.html.twig' %}

{% block title %}
    My App
{% endblock %}

{% block body %}

    {% include 'components/navbar.html.twig' %}

    <div class="text-center m-5">
        <div class="mt-5 mb-2">
            <h1>Comments page</h1>
            <button type="button" class="btn btn-danger" id="delete-setter">Set all records for delete</button>
            <button type="button" class="btn btn-warning" id="delete-unsetter">Unset all records for delete</button>
            <button type="button" class="btn btn-success" id="delete-chosen-comments">Delete all chosen records</button>
        </div>
        {% set counter = 0 %}
        {% for i in range(0,  comments | length - 1) %}
            {% if counter == 0 %}
                <div class="d-flex justify-content-between flex-lg-row flex-column">
            {% endif %}
            <div class="col m-2">
                <div class="card">
                    <div class="card-body">
                        <h5 class="comment-id">{{ comments[i].id }}: {{ comments[i].title }}</h5>
                        <p class="card-text">{{ comments[i].content }}</p>
                        <a class="btn btn-primary" href="/comment/{{ comments[i].id }}">Open</a>
                        <button id="deleteButton" class="btn btn-primary" data-id={{ comments[i].id }}
                        type="button">Delete
                        </button>
                        <input type="checkbox" class="btn-check delete-checkbox" id={{ comments[i].id }}
                        autocomplete="off">
                        <label class="btn btn-outline-danger" for={{ comments[i].id }}>set for delete</label>
                    </div>
                </div>
            </div>
            {% set counter = counter + 1 %}
            {% if counter == 2 %}
                </div>
                {% set counter = 0 %}
            {% endif %}
        {% endfor %}
    </div>

    {% include 'components/paginator.html.twig' %}

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous">
    </script>
    <script src="/assets/javascript/confirmDelete.js" type="module"></script>
    <script src="/assets/javascript/deleteCommentsByCheckbox.js" type="module"></script>
{% endblock %}
